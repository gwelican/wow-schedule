(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{489:function(t,e,o){var content=o(523);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(22).default)("01d4471d",content,!0,{sourceMap:!1})},522:function(t,e,o){"use strict";o(489)},523:function(t,e,o){var r=o(21)((function(i){return i[1]}));r.push([t.i,".timeslot{\n  --tw-bg-opacity:1;\n  background-color:rgba(191, 219, 254, var(--tw-bg-opacity));\n  --tw-border-opacity:1;\n  border-color:rgba(0, 0, 0, var(--tw-border-opacity));\n  border-style:solid;\n  border-right-width:2px;\n  border-left-width:2px;\n  height:0.375rem;\n  width:2rem;\n  gap:0px\n}\n.timeslot:nth-child(2n+0){\n  --tw-border-opacity:1;\n  border-color:rgba(0, 0, 0, var(--tw-border-opacity));\n  border-style:solid;\n  border-top-width:2px\n}\n.timeslot:nth-child(4n+0){\n  border-top-style:dotted;\n  --tw-border-opacity:1;\n  border-color:rgba(0, 0, 0, var(--tw-border-opacity));\n  border-top-width:2px\n}\n.timeslot-time{\n  margin-top:-0.75rem;\n  padding-right:0.25rem;\n  text-align:right;\n  --tw-text-opacity:1;\n  color:rgba(0, 0, 0, var(--tw-text-opacity));\n  grid-row:span 3 / span 3;\n  grid-row-start:2\n}\n.selected{\n  --tw-bg-opacity:1;\n  background-color:rgba(4, 120, 87, var(--tw-bg-opacity))\n}",""]),t.exports=r},535:function(t,e,o){"use strict";o.r(e);o(72);var r=o(27),n=o(25),l=o(38),c=o(39),d=o(36),m=o(20),f=o(18),v=(o(14),o(221),o(222),o(223),o(224),o(225),o(226),o(227),o(228),o(229),o(230),o(231),o(232),o(233),o(234),o(28),o(46),o(50),o(82),o(54),o(34),o(85),o(45),o(12),o(40),o(143)),w=o(70),h=o(484),y=o.n(h);function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,r=Object(m.a)(t);if(e){var n=Object(m.a)(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return Object(d.a)(this,o)}}var D,O,x,k=function(t,e,o,desc){var r,n=arguments.length,l=n<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(n<3?r(l):n>3?r(e,o,l):r(e,o))||l);return n>3&&l&&Object.defineProperty(e,o,l),l};!function(t){t[t.DELETE=0]="DELETE",t[t.ADD=1]="ADD"}(O||(O={})),function(t){t[t.DOWN=0]="DOWN",t[t.UP=1]="UP"}(x||(x={}));var T=Object(v.namespace)("myschedule"),j=D=function(t){Object(c.a)(o,t);var e=_(o);function o(){var t;return Object(n.a)(this,o),(t=e.apply(this,arguments)).forceRenderNumber=100,t.availability=new Map,t.days=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],t.mouseButtonState=x.UP,t.operation=O.ADD,t}return Object(l.a)(o,[{key:"save",value:function(){console.log(this.availability);var t=Array.from(this.availability).map((function(t){var e=Object(r.a)(t,2),o=e[0];return e[1].map((function(t){return{start:Number(t.start.toFormat("HHmm")),end:Number(t.end.toFormat("HHmm")),timezone:"PST",day:o}}))}));this.saveSchedule({apollo:this.$apollo,timezone:"pst",schedule:t.flat()})}},{key:"hours",get:function(){for(var t=[],i=0;i<24;i++)t.push(i);return t}},{key:"mouseUp",value:function(){this.mouseButtonState=x.UP,this.forceRenderNumber++,console.log("redraw"),this.createAvailabilityRangesFromTimeslots()}},{key:"createAvailabilityRangesFromTimeslots",value:function(){if(this.timeslot.size>1)for(var t=y.a.groupBy(Array.from(this.timeslot),(function(t){return t.split("_")[0]})),e=0,o=Object.keys(t);e<o.length;e++){var r=o[e],n=t[r].map((function(t){var slot=parseInt(t.split("_")[1]),e=2345===slot?14:15;return w.Interval.fromDateTimes(w.DateTime.fromObject({hour:Math.floor(slot/100),minute:slot%100}),w.DateTime.fromObject({hour:Math.floor(slot/100),minute:slot%100}).plus(w.Duration.fromObject({minutes:e})))})),l=w.Interval.merge(n);this.availability.set(r,l)}}},{key:"mouseOver",value:function(t,slot){var e=D.createKey(t,slot);console.log("mouseover: "+e),this.mouseButtonState===x.DOWN&&this.$refs[e]&&(this.operation===O.ADD?this.selectTimeslot(t,slot):this.operation===O.DELETE&&this.deSelectTimeslot(t,slot))}},{key:"selectTimeslot",value:function(t,slot){var e=D.createKey(t,slot);if(console.log("selecting timeslot: "+e),this.$refs[e]){var o=this.$refs[e];o.length>0&&o[0].classList.add("selected")}this.addTimeslotKey(e)}},{key:"deSelectTimeslot",value:function(t,slot){var e=D.createKey(t,slot);if(console.log("deselecting timeslot: "+e),this.$refs[e]){var o=this.$refs[e];o.length>0&&o[0].classList.remove("selected")}this.deleteTimeslotKey(e)}},{key:"mouseDown",value:function(t,e){this.operation=this.timeslot.has(D.createKey(t,e))?O.DELETE:O.ADD,console.log("mouse down"+e),this.mouseButtonState=x.DOWN,this.mouseOver(t,e)}},{key:"getTimeslotClasses",value:function(t,e){var o=["timeslot"];return this.timeslot.has(D.createKey(t,e))&&o.push("selected"),o}},{key:"mounted",value:function(){var t=this;this.loadSchedule2(this.$apollo).then((function(){t.forceRenderNumber++,t.createAvailabilityRangesFromTimeslots()}))}}],[{key:"createKey",value:function(t,e){return"".concat(t,"_").concat(e)}}]),o}(v.Vue);k([T.Mutation],j.prototype,"deleteTimeslotKey",void 0),k([T.Mutation],j.prototype,"addTimeslotKey",void 0),k([T.State],j.prototype,"timeslot",void 0),k([T.Action],j.prototype,"loadSchedule2",void 0),k([T.Action],j.prototype,"saveSchedule",void 0);var R=j=D=k([Object(v.Component)({filters:{humanDate:function(t){return t.start.toFormat("HH:mm")+"-"+t.end.toFormat("HH:mm")}}})],j),S=(o(522),o(108)),C=o(142),E=o.n(C),P=o(213),A=o(483),component=Object(S.a)(R,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",[o("div",{staticClass:"tw-rounded tw-bg-gray-700 lg:tw-w-1/2 xs:tw-w-1/2 md:tw-w-1 tw-mx-auto tw-flex"},[o("div",{staticClass:"lg:tw-w-1/2 xs:tw-w-1/3 tw-m-1 tw-flex-col tw-flex"},[t._l(t.availability.keys(),(function(e){return o("div",{key:e,staticClass:"tw-rounded tw-bg-gray-500 tw-mt-2 tw-p-2 hover:tw-bg-blue-800"},[t._v("\n        "+t._s(e)+":\n        "),t._l(t.availability.get(e),(function(e){return o("span",{key:e.start.toISO(),staticClass:"tw-h-auto"},[t._v("\n          ["+t._s(t._f("humanDate")(e))+"]\n        ")])}))],2)})),t._v(" "),o("v-btn",{staticClass:"tw-mt-auto",on:{click:t.save}},[t._v("Save")])],2),t._v(" "),o("div",{key:t.forceRenderNumber,staticClass:"tw-bg-white tw-p-6 lg:tw-w-1/2 xs:tw-w-2/3 tw-rounded tw-px-2 tw-py-1 tw-m-1"},[o("div",{staticClass:"tw-grid tw-grid-flow-col tw-grid-cols-7 tw-w-auto tw-m-auto tw-text-black tw-col-start-2"},t._l(t.days,(function(e,r){return o("div",{key:r,class:"tw-col-start-"+(r+2)},[o("span",{staticClass:"xs:tw-text-xs"},[t._v("\n            "+t._s(e)+"\n          ")])])})),0),t._v(" "),t._l(t.hours,(function(e){return o("div",{key:e,staticClass:"tw-grid tw-grid-flow-col tw-grid-cols-7 tw-w-auto tw-m-auto",on:{mouseup:function(e){return e.stopPropagation(),t.mouseUp(e)}}},[o("div",{staticClass:"timeslot-time tw-w-full xs:tw-text-2xs"},[t._v(t._s(e)+":00")]),t._v(" "),t._l(t.days,(function(r){return t._l([0,15,30,45],(function(n){return o("div",{key:r+"_"+(100*e+n),ref:r+"_"+(100*e+n),refInFor:!0,class:t.getTimeslotClasses(r,100*e+n),attrs:{"data-time":r+"_"+(100*e+n)},on:{mouseover:function(o){return t.mouseOver(r,100*e+n)},mousedown:function(o){return t.mouseDown(r,100*e+n)},mouseup:function(e){return e.stopPropagation(),t.mouseUp(e)},touchstart:function(o){return o.stopPropagation(),t.mouseDown(r,100*e+n)},touchend:function(e){return e.stopPropagation(),t.mouseUp(e)},touchmove:function(o){return o.stopPropagation(),t.mouseOver(r,100*e+n)}}})}))}))],2)}))],2)])])}),[],!1,null,null,null);e.default=component.exports;E()(component,{VBtn:P.a,VContainer:A.a})}}]);